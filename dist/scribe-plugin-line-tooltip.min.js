define(function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var o="scribe-plugin-line-tooltip";n(1);var s=function(){function t(){return i(this,t),this.currentTooltipEl=null,this.scribe=null,this}return r(t,[{key:"init",value:function(t,e){var n=this,i=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return this.parentBounce=t.getBoundingClientRect(),this.editorContainer=t,this.scrollContainer=i,this.handlers=e,function(t){n.scribe=t,t.el.addEventListener("click",_.throttle(n.update.bind(n),300)),t.el.addEventListener("keyup",_.throttle(n.updateKey.bind(n),300))}}},{key:"createTooltip",value:function(){var t=document.createElement("div");t.classList.add(""+o),t.classList.add(o+"--tooltip");var e=document.createElement("div");return e.classList.add("tooltip"),e.classList.add("js-tooltip"),e.innerHTML='\n      <p class="tooltip__item"> <i class="icon icon--plus"></i> </p>\n    ',t.appendChild(e),t}},{key:"setTooltip",value:function(){var t=this;return null!==this.currentTooltipEl?!1:(this.currentTooltipEl=this.createTooltip(),_.forEach(this.handlers,function(e,n){t.currentTooltipEl.addEventListener(n,function(n){e(n,t)})}),this.editorContainer.appendChild(this.currentTooltipEl),this.currentTooltipEl)}},{key:"removeTooltip",value:function(){var t=this.editorContainer.querySelectorAll(".scribe-plugin-line-tooltip");return _.forEach(t,function(t){t.remove()}),this.currentTooltipEl=null,!0}},{key:"update",value:function(t){var e=new this.scribe.api.Selection,n=e.getContaining(function(t){return"P"===t.nodeName});if(n){var i=this.scribe.node,r=i.isEmptyInlineElement(n);if(r){n.classList.add("emptyline"),this.removeTooltip(),this.setTooltip();var o=n.getBoundingClientRect(),s=0;this.scrollContainer&&(s=this.scrollContainer.scrollTop),this.currentTooltipEl.style.top=window.scrollY+s+o.top-this.parentBounce.top+"px"}else n.classList.remove("emptyline"),this.removeTooltip()}}},{key:"updateKey",value:function(t){this.update(t)}}]),t}();e["default"]=s},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.id,i,""]]);n(4)(i,{})},function(t,e,n){e=t.exports=n(3)(),e.push([t.id,".scribe-plugin-line-tooltip{position:absolute;cursor:pointer}.scribe-plugin-line-tooltip p{line-height:1;margin:5px 0;font-size:20px}.scribe-plugin-line-tooltip .tooltip--hover{transition:all .1s ease-in}.scribe-plugin-line-tooltip .tooltip--hover .tooltip__item{transform:rotate(45deg)}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=c[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(s(i.parts[o],e))}else{for(var l=[],o=0;o<i.parts.length;o++)l.push(s(i.parts[o],e));c[i.id]={id:i.id,refs:1,parts:l}}}}function r(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],o=r[0],s=r[1],l=r[2],a=r[3],u={css:s,media:l,sourceMap:a};n[o]?n[o].parts.push(u):e.push(n[o]={id:o,parts:[u]})}return e}function o(){var t=document.createElement("style"),e=f();return t.type="text/css",e.appendChild(t),t}function s(t,e){var n,i,r;if(e.singleton){var s=v++;n=h||(h=o()),i=a.bind(null,n,s,!1),r=a.bind(null,n,s,!0)}else n=o(),i=u.bind(null,n),r=function(){n.parentNode.removeChild(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function l(t,e,n){var i=["/** >>"+e+" **/","/** "+e+"<< **/"],r=t.lastIndexOf(i[0]),o=n?i[0]+n+i[1]:"";if(t.lastIndexOf(i[0])>=0){var s=t.lastIndexOf(i[1])+i[1].length;return t.slice(0,r)+o+t.slice(s)}return t+o}function a(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=l(t.styleSheet.cssText,e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function u(t,e){var n=e.css,i=e.media,r=e.sourceMap;if(r&&"function"==typeof btoa)try{n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(r))+" */",n='@import url("data:text/css;base64,'+btoa(n)+'")'}catch(o){}if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var c={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},d=p(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),f=p(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,v=0;t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=d());var n=r(t);return i(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var l=n[s],a=c[l.id];a.refs--,o.push(a)}if(t){var u=r(t);i(u,e)}for(var s=0;s<o.length;s++){var a=o[s];if(0===a.refs){for(var p=0;p<a.parts.length;p++)a.parts[p]();delete c[a.id]}}}}}])});